<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="utf-8">
    <title>GreenDeals</title>
    <link rel="icon" href="images\logo.png" type="image/x-icon">
<link rel="stylesheet" href="detailStyle.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!--Header externo-->
    <div w3-include-html="header.html"></div>

    <div class="container">
        <!--Menu aside para alterar informações e eliminar produtos-->
        <div w3-include-html="aside.html"></div>
        <main class="main-content">
            <!--Título da categoria do produto-->
            <h2 id="product-category">Categoria: a, b, c</h2>
            <!--Informações do produto-->
            <div class="product-details">
                <img class="table-img" id="product-image" src='images/produtos/cabide.jpg' alt="Isto é um item"/>
                <p id="product-name"><strong>Nome do Produto:</strong> Nome Xx Yy</p>
                <p id="product-description"><strong>Descrição:</strong> Descrição do Produto</p>
                <p id="product-price"><strong>Preço:</strong> XX.xx€</p>
                <p id="product-seller"><strong>Nome do Anunciante:</strong> Nome Xx Yy</p>
                <p id="product-location"><strong>Localização:</strong> Rua A, n.º X, Cidade, XXXX-XXX Cidade</p>
                <p id="product-date"><strong>Data de Publicação:</strong> dd/mm/aaaa</p>
            </div>

            <form id="edit-delete-buttons" style="display: none;">
                <input type="button" id="edit-product" value="Editar informações"><br>
                <input type="button" id="delete-product" value="Eliminar produto"><br>
            </form>

            <!--Butão de contacto-->
            <button id="contact-btn" onclick="toggleContactForm()">Contatar o Anunciante</button>
            <div id="contact-form" style="display: none;">
                <textarea id="message" placeholder="Escreva aqui a sua mensagem..."></textarea><br>
                <button id="send-btn" onclick="sendMessage()">Enviar</button>
            </div>

            <!-- Janela modal para alterar informações de um produto -->
            <div id="modal-detail" class="modal-detail">
                <!-- Conteúdo da janela modal -->
                <div class="modal-content-detail">
                    <div class="modal-header-detail" id="modal-header-detail">
                        <p class="modal-header-detail-title">Alterar informações de produto</p>
                        <p class="close-detail" id="close-detail">&times;</p>
                    </div>
                    <div class="modal-body-detail">
                        <!--Formulário de edição de informações de um produto-->
                        <div class="edit-product-form" id="edit-product-form">
                            <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-nome">Nome do Produto:</label>
                                <input type="text" id="edit-nome" name="edit-nome">
                            </div>
                            <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-descricao">Descrição:</label>
                                <input type="text" id="edit-descricao" name="edit-descricao">
                            </div>
                            <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-preco">Preço do Produto:</label>
                                <input type="text" id="edit-preco" name="edit-preco">
                            </div>
                            <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-categoria">Categoria do Produto:</label>
                                <select id="edit-categoria" name="edit-categoria">
                                    <option value="vestuario">Vestuário</option>
                                    <option value="calcado">Calçado</option>
                                    <option value="brinquedos">Brinquedos</option>
                                    <option value="viagens">Viagens</option>
                                    <option value="papelaria">Papelaria</option>
                                </select>
                            </div>
                            <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-localidade">Localização:</label>
                                <input type="text" id="edit-localidade" name="edit-localidade">
                            </div>
                            <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-imagem">url de imagem:</label>
                                <input type="text" id="edit-imagem" name="edit-imagem">
                             </div>
                             <div class="edit-product-form-field" id="edit-product-form-field">
                                <label for="edit-categoria">Estado do artigo:</label>
                                <select id="edit-state" name="edit-state">
                                    <option value="RASCUNHO">Rascunho</option>
                                    <option value="DISPONIVEL">Disponível</option>
                                    <option value="RESERVADO">Reservado</option>
                                    <option value="COMPRADO">Comprado</option>
                                </select>
                            </div>
                             <input type="submit" class="save-product" id="save-product" value="Guardar Alterações" onclick="saveEditedProduct(productId)">                    
                        </div>
                    </div>
                </div>
            </div>

        </main>
    </div>
    <div class="reviews">
        <section id="avaliacao-form">
            <h2>Adicionar Avaliação</h2>
            <form id="formAvaliacao">
                <textarea id="comentario" name="comentario" required></textarea>

                <div class="rating-container">
                    <div id="rating" class="rating">
                        <i class="fas fa-star" data-value="1"></i>
                        <i class="fas fa-star" data-value="2"></i>
                        <i class="fas fa-star" data-value="3"></i>
                        <i class="fas fa-star" data-value="4"></i>
                        <i class="fas fa-star" data-value="5"></i>
                    </div>
                    <span id="rating-text"></span>
                </div>
                <input type="hidden" id="nota" name="nota">
<br>
                <button type="submit">Enviar Avaliação</button>
            </form>
        </section>

        <h2>Estatísticas de Avaliações</h2>
        
        <div id="rating-summary">
            <div id="average-rating"></div>
            <div id="total-ratings"></div>
        </div>

        <div id="rating-stats"></div>

        <section id="avaliacoes">
            <h2>Avaliações</h2>
            <div id="avaliacoes-container"></div>
        </section>
    </div>
    
     <!--Footer externo-->
    <div w3-include-html="footer.html"></div>   
    </body>
        <script src="https://www.w3schools.com/lib/w3.js"></script>
        <script src="scriptDetail.js"></script>   
        <script src="scriptFooter.js"></script>
        <script src="scriptHeader.js"></script>
        <script src="Avaliacoes.js"></script>
    
</html>
